=== Custom Consul services

Consul services check is based on defintion as per file `puppet-hpc/hieradata/common.yaml` extract:

[source,yaml]
----
profiles::consul::server::subservices:
  apt:
    check:
      id: 'apt_check'
      name: 'Local HTTP service check'
      http: "http://%{::hostname}:%{hiera('apt::proxy_port')}/acng-report.html"
      interval: '10s'
      timeout: '1s'
  tftp:
    check:
      id: 'tftpd_check'
      name: 'Local TFTPD service check'
      script: '/usr/lib/nagios/plugins/check_procs -c 1: --command=in.tftpd'
      interval: '30s'
      timeout: '10s'
  secret:
    check:
      id: 'http_secret_check'
      name: 'Local HTTP secret check'
      http: "http://localhost:%{hiera('secret_port')}/"
      interval: '10s'
      timeout: '1s'
  web-boot:
    check:
      id: 'http_boot_check'
      name: 'Local HTTP bootsystem check'
      http: "http://%{::hostname}:%{hiera('boot_http_port')}/"
      interval: '10s'
      timeout: '1s'
  web-system:
    check:
      id: 'http_system_check'
      name: 'Local HTTP System VHost check'
      http: "http://localhost:%{hiera('profiles::http::system::port')}/"
      interval: '10s'
      timeout: '1s'
----

Any of these service can be disabled with empty hash definition.
For example, to disable web-system service, just add to `$ADMIN/hpc-privatedata/hieradata/$CLUSTER/cluster.yaml`:
[source,yaml]
----
profiles::consul::server::subservices:
# disable web-system service
  web-system: {}
----
